ğŸ“¦ Informe del Proyecto "Para Ti"
Este informe establece la estructura, estado actual, y plan de acciÃ³n para el desarrollo de la aplicaciÃ³n "Para Ti", siguiendo la metodologÃ­a propuesta.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”¹ 1. SYSTEM ROLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Asistente senior en programaciÃ³n full-stack, DevOps y UX.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”¹ 2. CONTEXTO DEL PROYECTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Nombre: Para Ti
Objetivo de negocio: AplicaciÃ³n mÃ³vil que permite a los usuarios crear y enviar archivos envueltos en un regalo virtual 3D interactivo.
PÃºblico objetivo: Usuarios de WhatsApp que deseen enviar regalos personalizados y Ãºnicos.
Plataformas previstas: Inicialmente Android, con planes a futuro para una versiÃ³n Web (PWA) para la visualizaciÃ³n del regalo por el destinatario.
TecnologÃ­as preferidas: Kotlin (Jetpack Compose), Hilt, Firebase (Firestore, Storage), WebView (con Three.js para 3D).
Restricciones especiales: El desarrollo se enfoca en soluciones gratuitas y/o de cÃ³digo abierto.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”¹ 3. ARQUITECTURA â€“ â€œVibe Planning / Architectureâ€
(No incluyas cÃ³digo real; solo descripciones claras)
Front-end (Android):
Framework: Jetpack Compose para la construcciÃ³n de la interfaz de usuario.
Lenguaje: Kotlin.
Rutas clave: Utiliza androidx.navigation.compose.NavHost para gestionar la navegaciÃ³n entre pantallas: Bienvenida â†’ Formulario â†’ SelectorTexturas â†’ Preview3D.
Estado: GestiÃ³n del estado de la aplicaciÃ³n centralizada a travÃ©s de ViewModel (Jetpack ViewModel) y StateFlow para datos reactivos. Hilt para inyecciÃ³n de dependencias de ViewModels.
MÃ³dulo 3D: IntegraciÃ³n de un WebView para cargar una escena 3D interactiva (viewer.html). La comunicaciÃ³n entre Kotlin y JavaScript se realiza mediante AndroidBridge (para llamadas JS a Kotlin) y evaluateJavascript (para llamadas Kotlin a JS). La carga de assets 3D (modelos GLB, texturas) se maneja a travÃ©s de WebViewAssetLoader.
Back-end/API:
Base de datos: Firebase Firestore para el almacenamiento de la informaciÃ³n del regalo (metadatos del remitente, destinatario, mensaje, texturas seleccionadas y URLs de archivos adjuntos).
Almacenamiento de archivos: Firebase Storage para los archivos multimedia adjuntos por el usuario.
AutenticaciÃ³n: No implementada en el MVP actual; se podrÃ­a integrar Firebase Authentication a futuro si se requieren funciones de usuario registrado.
DevOps:
Control de versiones: Git (ya en uso).
CompilaciÃ³n/Build: Gradle (estÃ¡ndar de Android).
CI/CD: No implementado actualmente.
Escalabilidad & Seguridad bÃ¡sicas:
Escalabilidad: Firebase Firestore y Storage son servicios escalables por diseÃ±o, adecuados para un crecimiento inicial de usuarios.
Seguridad: Las reglas de seguridad de Firestore y Storage son cruciales para proteger los datos y los archivos. Actualmente, la seguridad se basa en que los IDs de regalo son difÃ­ciles de adivinar, pero se necesitarÃ­a una lÃ³gica de autenticaciÃ³n para acceso restringido a regalos privados.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”¹ 4. CARACTERÃSTICAS / â€œFILTERSâ€ (MVP)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
US-1 Â«Como usuario, quiero poder crear un regalo virtual personalizado, especificando el nombre y telÃ©fono de WhatsApp del destinatario, un mensaje personalizado y adjuntar un archivo (imagen/video).Â»
US-2 Â«Como usuario, quiero seleccionar diversas opciones de personalizaciÃ³n para el regalo 3D, incluyendo la textura de la caja, el diseÃ±o del papel de regalo, la forma, color y acabado del lazo, y la textura de la tarjeta.Â»
US-3 Â«Como usuario, quiero previsualizar mi regalo 3D en tiempo real, pudiendo interactuar con Ã©l haciendo clic en el sobre para abrirlo, en la tarjeta para leer el mensaje y en el lazo para revelar el interior del regalo.Â»
US-4 Â«Como usuario, quiero guardar la configuraciÃ³n de mi regalo en una base de datos para generar un enlace Ãºnico que pueda compartir con el destinatario.Â»
US-5 Â«Como destinatario, quiero recibir un enlace por WhatsApp que me permita visualizar el regalo 3D interactivo en un navegador web (MVP futuro: PWA simple).Â»
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”¹ 5. PLAN DE ACCIÃ“N â€“ â€œVibe Coding / Task Listâ€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Estado Actual (Resumen):
Hemos configurado el proyecto Android con Compose y Hilt. Las pantallas de formulario, selecciÃ³n de texturas y previsualizaciÃ³n 3D estÃ¡n implementadas con sus respectivos ViewModels. La visualizaciÃ³n 3D en viewer.html carga el modelo .glb, aplica texturas y hemos integrado la lÃ³gica de interacciÃ³n de clics y secuenciaciÃ³n de animaciones (abrir sobre/tarjeta, leer mensaje, abrir regalo principal) en viewer.html y su comunicaciÃ³n con PantallaPreview3D.kt.
Archivos y Proyectos Clave en Uso:
Proyecto Android: D:\Pedro\Documents\androidestudio\ParaTiApp03
app/src/main/java/com/example/paratiapp/MainActivity.kt: Punto de entrada y gestiÃ³n de navegaciÃ³n.
app/src/main/java/com/example/paratiapp/ParaTiApplication.kt: Clase Application para Hilt.
app/src/main/java/com/example/paratiapp/data/Regalo.kt: Clase de datos para el regalo.
app/src/main/java/com/example/paratiapp/data/RegaloRepository.kt: Interfaz del repositorio de datos.
app/src/main/java/com/example/paratiapp/data/RegaloRepositoryImpl.kt: ImplementaciÃ³n del repositorio (Firestore).
app/src/main/java/com/example/paratiapp/ui/screens/*.kt: Archivos de las pantallas Compose (Bienvenida, Formulario, SelectorTextura, Preview3D).
app/src/main/java/com/example/paratiapp/ui/components/SelectorDeTexturas.kt: Componente reutilizable para la selecciÃ³n de texturas.
app/src/main/java/com/example/paratiapp/ui/viewmodel/RegaloViewModel.kt: ViewModel principal para el estado del regalo.
app/src/main/assets/html3d/viewer.html: Archivo HTML con la lÃ³gica Three.js para la visualizaciÃ³n 3D y animaciones.
app/src/main/assets/texturas/packages/caja_base.glb: Modelo 3D base del regalo.
app/build.gradle.kts (mÃ³dulo app): ConfiguraciÃ³n de dependencias (Compose, Hilt, Firebase, WebView).
google-services.json: ConfiguraciÃ³n de Firebase.
Herramienta de Modelado 3D: Blender (para crear caja_base.glb y sus animaciones). El archivo informe_blender_completo parati 2025-05-31.txt detalla la estructura del modelo.
PrÃ³ximas Tareas (Vibe Coding):
VerificaciÃ³n Post-Patch: Validar que la interacciÃ³n 3D (Clic en Sobre/Solapa â†’ Tarjeta Visible y Mensaje; Clic en Tarjeta â†’ AlertDialog con Mensaje; Clic en Lazo/Cintas â†’ Lazos y Papel Caen, Tapa se Abre) y la secuenciaciÃ³n de animaciones en PantallaPreview3D (via viewer.html) funcionan correctamente tras aplicar el Ãºltimo patch. (Esta es la tarea inmediata).
Mejora de Animaciones 3D: Evaluar y refinar el realismo de las animaciones de "caÃ­da de papel" y "ocultar cintas/lazos". Esto requerirÃ¡, en primera instancia, ajustes en Blender (curvas de animaciÃ³n, fÃ­sicas) y luego una actualizaciÃ³n del .glb y posiblemente de las llamadas en viewer.html.
GestiÃ³n de Archivo Adjunto: Implementar la funcionalidad para seleccionar y adjuntar un archivo (imagen/video) desde la galerÃ­a del dispositivo en PantallaFormulario, manejar su subida a Firebase Storage, y guardar la URL resultante en el campo archivoUrl del objeto Regalo en Firestore.
Funcionalidad de Compartir: Desarrollar la lÃ³gica para que, una vez guardado el regalo, se genere un enlace Ãºnico (https://tua.app/gift?id=<ID_REGALO>) y se pueda compartir a travÃ©s de WhatsApp. Esto implica integrar el ACTION_SEND de Android o la API de WhatsApp si es posible.
RecepciÃ³n del Regalo (Prototipo Web): Crear una mini-PWA o una vista web simple (fuera del proyecto Android principal por ahora) que, al abrir el enlace compartido, lea el ID del regalo de la URL, recupere los datos de Firestore y muestre el regalo 3D personalizado al destinatario, incluyendo el archivo adjunto.
Nota para el usuario: Por favor, procede con la Tarea 1: VerificaciÃ³n Post-Patch. Una vez que hayas probado el comportamiento de la aplicaciÃ³n tras aplicar los cambios en viewer.html, hÃ¡zmelo saber. Indica si funciona como esperas o si encuentras algÃºn problema especÃ­fico (con logs, si los hay).